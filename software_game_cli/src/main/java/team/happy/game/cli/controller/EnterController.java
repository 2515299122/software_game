package team.happy.game.cli.controller;import com.jfoenix.controls.JFXTextField;import javafx.event.EventType;import javafx.fxml.FXML;import javafx.scene.control.Label;import javafx.scene.input.InputMethodEvent;import org.smartboot.socket.transport.AioSession;import team.happy.game.cli.socket.MessageProcessorCli;import team.happy.game.cli.utils.AioSessionUtil;import team.happy.game.cli.utils.GlobalPathUtil;import team.happy.game.commons.entity.ActionStatus;import team.happy.game.commons.entity.Code;import team.happy.game.commons.entity.Message;import team.happy.game.commons.utils.SocketUtil;import java.util.UUID;/** * @author 冰冰 * @date 2020/11/23 下午1:30 */public class EnterController {    @FXML    private Label info;    @FXML    private JFXTextField number;    private boolean flag;    @FXML    public void initialize() {        number.addEventHandler(EventType.ROOT, event -> {            if (!flag) {                String text = number.getText();                if (text == null || text.trim().length() < 6) {                    return;                } else {                    flag = true;                    number.setDisable(true);                    String baseInfo = "正在进入游戏，请稍后...";                    info.setText(baseInfo);                    info.setVisible(true);                    // 发送请求到服务端请求开始游戏寻找队友                    Code.setNum(text);                    AioSession session = AioSessionUtil.getSession();                    Message<String> message = new Message<>(ActionStatus.A);                    SocketUtil.sendMsg(session, message);                    while(true){                        Message message1 = MessageProcessorCli.getMessage();                        //等待接受信息                        if (message1 != null && message1.getStatus().equals(ActionStatus.B)) {                            System.out.println("人数已经到齐，开始游戏");                            break;                        }                    }                    // 成功寻找队友后跳转到开始页面                    GlobalPathUtil.changePath("chess.fxml");                }            }        });    }    public void onEnterNumChanged(InputMethodEvent inputMethodEvent) {    }}